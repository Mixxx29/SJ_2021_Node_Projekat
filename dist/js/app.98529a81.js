(function(t){function e(e){for(var s,o,i=e[0],u=e[1],c=e[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},r=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0649":function(t,e,n){},"27e4":function(t,e,n){t.exports=n.p+"img/arrow.4abaa8bf.svg"},"4d20":function(t,e,n){t.exports=n.p+"img/line.f231b591.svg"},5266:function(t,e,n){t.exports=n.p+"img/day_empty.2e61056e.svg"},"52e8":function(t,e,n){"use strict";n("d2df")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o={name:"Home",sockets:{error:function(t){"Not Authenticated"===t.msg&&this.$router.push({name:"Login"})}}},i=o,u=n("2877"),c=Object(u["a"])(i,a,r,!1,null,null,null),l=c.exports,p=n("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("Header"),s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"logo",attrs:{src:n("e347")}})]),t._m(0),s("div",{staticClass:"button"},[s("router-link",{attrs:{to:"/calendar"}},[s("img",{attrs:{src:n("cb5b")}})])],1)],1)},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"title"},[t._v(" Najbolji termini uvek slobodni za vas. "),n("br"),t._v(" Zakazite jos danas! ")])}],f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"header"}},[s("div",{staticClass:"wrapper"},[t.user?s("img",{staticClass:"profile v-center",attrs:{src:n("c768")}}):t._e(),t.user?s("p",{staticClass:"username v-center"},[t._v(t._s(t.username))]):t._e(),t.displayLogo?s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"logo v-center",attrs:{src:n("e347")}})]):t._e(),s("div",{staticClass:"auth v-center"},[s("router-link",{attrs:{to:"/calendar"}},[s("div",[t._v("Termini")])]),t.user?t._e():s("router-link",{attrs:{to:"/login"}},[s("div",[t._v("Prijava")])]),t.user?t._e():s("router-link",{attrs:{to:"/register"}},[s("div",[t._v("Registracija")])]),t.user?s("div",{staticClass:"logout",on:{click:t.onLogout}},[t._v("Odjava")]):t._e()],1)],1)])},h=[],g=n("5530"),v=n("2f62"),b={name:"Header",data:function(){return{user:null}},props:{displayLogo:Boolean},computed:{username:function(){if(this.user)return this.user.username}},methods:Object(g["a"])(Object(g["a"])({},Object(v["b"])(["logout"])),{},{onLogout:function(){var t=this;this.logout().then((function(){"/"!==t.$route.fullPath?t.$router.push({name:"Home"}):t.$router.go()}))}}),mounted:function(){this.displayLogo&&(document.getElementById("header").style.boxShadow="0 3px 10px #a06389"),"null"!==localStorage.user&&(this.user=JSON.parse(localStorage.user))}},y=b,k=(n("7f76"),Object(u["a"])(y,f,h,!1,null,"fbb1960a",null)),_=k.exports,C={name:"Home",components:{Header:_}},w=C,j=(n("a8a7"),Object(u["a"])(w,d,m,!1,null,"26d08632",null)),x=j.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"calendar"},[s("Header",{attrs:{displayLogo:!0}}),s("div",{staticClass:"calendar-header"},[s("div",{staticClass:"header-wrapper"},[s("div",{staticClass:"arrow-wrapper"},[t.currentMonth>t.startMonth?s("img",{attrs:{src:n("27e4"),alt:"Next Month"},on:{click:function(e){return t.decrementMonth()}}}):t._e()]),s("p",{staticClass:"month"},[t._v(t._s(t.displayedMonth))]),s("div",{staticClass:"arrow-wrapper"},[t.currentMonth<t.startMonth+t.availableMoths-1?s("img",{attrs:{src:n("27e4"),alt:"Next Month"},on:{click:function(e){return t.incrementMonth()}}}):t._e()])])]),s("img",{staticClass:"line",attrs:{src:n("4d20"),alt:""}}),s("div",{staticClass:"days container"},[s("div",{staticClass:"row"},t._l(7,(function(e){return s("p",{staticClass:"col"},[t._v(t._s(t.days[e-1]))])})),0)]),s("img",{staticClass:"line",attrs:{src:n("4d20"),alt:""}}),s("div",{staticClass:"calendar-body container"},t._l(t.daySum/7,(function(e){return s("div",{staticClass:"row"},t._l(7,(function(n){return 7*(e-1)+(n-1)<t.emptyDays||7*(e-1)+(n-1)>=t.emptyDays+t.availableDays?s("div",{staticClass:"col"},[s("DayButton")],1):s("div",{staticClass:"col"},[s("DayButton",{attrs:{day:7*(e-1)+(n-1)-t.emptyDays+1,str:7*(e-1)+(n-1)-t.emptyDays+1+". "+t.months[t.currentMonth]+" - "+t.days[n-1],date:t.computedDate(7*(e-1)+(n-1)-t.emptyDays+1)}})],1)})),0)})),0)],1)},O=[],S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"day-button"},[t.day?s("img",{staticClass:"background",attrs:{src:n("5e07")},on:{click:t.onClick}}):s("img",{staticClass:"background",attrs:{src:n("5266")}}),t.day?s("p",{on:{click:t.onClick}},[t._v(t._s(t.day))]):t._e()])},D=[],P=(n("a9e3"),{name:"Day",props:{day:Number,str:String,date:String},methods:{onClick:function(){this.$router.push({name:"Appointments",params:{date:this.date,str:this.str}})}}}),$=P,N=(n("52e8"),Object(u["a"])($,S,D,!1,null,"2f11eb3a",null)),A=N.exports,E={name:"Calendar",components:{Header:_,DayButton:A},data:function(){return{currentMonth:0,startMonth:0,availableMoths:6,lastAdded:0,months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],days:["Ponedeljak","Utorak","Sreda","Cetvrtak","Petak","Subota","Nedelja"]}},methods:{incrementMonth:function(){this.currentMonth<this.startMonth+this.availableMoths-1&&this.currentMonth++},decrementMonth:function(){this.currentMonth>this.startMonth&&this.currentMonth--},computedDate:function(t){return"2022-"+(this.currentMonth<9?"0"+(this.currentMonth+1):this.currentMonth+1)+"-"+(t<10?"0"+t:t)}},computed:{displayedMonth:function(){return this.months[this.currentMonth%12]},emptyDays:function(){var t=new Date;return t.setMonth(this.currentMonth),t.setDate(0),t.getDay()},availableDays:function(){var t=new Date;return t.setMonth(this.currentMonth+1),t.setDate(0),t.getDate()},daySum:function(){var t=0;return(this.emptyDays+this.availableDays)%7!==0&&(t=7-(this.emptyDays+this.availableDays)%7),this.emptyDays+this.availableDays+t}},mounted:function(){this.startMonth=(new Date).getMonth(),this.currentMonth=this.startMonth}},R=E,H=(n("d665"),Object(u["a"])(R,M,O,!1,null,"373e4bf8",null)),L=H.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"auth"}},[s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"logo",attrs:{src:n("e347")}})]),t.isRegister?s("p",{staticClass:"title"},[t._v("Registracija")]):s("p",{staticClass:"title"},[t._v("Prijava")]),s("div",{staticClass:"form"},[s("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Korisnicko ime:","label-for":"input-1"}},[s("b-form-input",{staticClass:"input",attrs:{id:"input-1",type:"text",placeholder:"Unesite korisnicko ime",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),s("b-form-group",{staticClass:"label",attrs:{id:"input-group-2",label:"Sifra:","label-for":"input-2"}},[s("b-form-input",{staticClass:"input",attrs:{id:"input-2",type:"password",placeholder:"Unesite sifru",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t.isRegister?s("b-form-group",{staticClass:"label",attrs:{id:"input-group-3",label:"Ponovljena sifra:","label-for":"input-3"}},[s("b-form-input",{staticClass:"input",attrs:{id:"input-3",type:"password",placeholder:"Ponovite sifru",required:""},model:{value:t.form.repeatedPassword,callback:function(e){t.$set(t.form,"repeatedPassword",e)},expression:"form.repeatedPassword"}})],1):t._e(),t.msg?s("p",{staticClass:"msg"},[t._v(t._s(t.msg))]):t._e(),t.isRegister?s("img",{staticClass:"button",attrs:{tabindex:"0",src:n("99e0"),alt:"Registracija"},on:{click:t.onRegister,keydown:t.onRegister}}):s("img",{staticClass:"button",attrs:{tabindex:"0",src:n("d625"),alt:"Prijava"},on:{click:t.onLogin,keydown:t.onLogin}})],1),t.isRegister?s("router-link",{staticClass:"down",attrs:{to:"/login"}},[t._v("Imate nalog? Prijavite se ovde!")]):s("router-link",{staticClass:"down",attrs:{to:"/register"}},[t._v("Nemate nalog? Registrujte se ovde!")])],1)},J=[],B={name:"Authentication",data:function(){return{msg:"",form:{username:"",password:"",repeatedPassword:""}}},props:{isRegister:Boolean},methods:Object(g["a"])(Object(g["a"])({},Object(v["b"])(["login","register"])),{},{onLogin:function(t){var e=this;t.key&&"Enter"!==t.key&&" "!==t.key||this.login(this.form).then((function(){e.$router.push({name:"Home"})})).catch((function(t){e.msg=t.msg}))},onRegister:function(t){var e=this;t.key&&"Enter"!==t.key&&" "!==t.key||this.register(this.form).then((function(){e.$router.push({name:"Home"})})).catch((function(t){e.msg=t.msg}))}})},U=B,z=(n("95f4"),Object(u["a"])(U,T,J,!1,null,"44894423",null)),I=z.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"appointments"},[n("Header",{attrs:{displayLogo:!0}}),n("p",{staticClass:"date"},[t._v(t._s(t.str))]),n("div",{staticClass:"wrapper"},t._l(t.hoursComputed,(function(e){return n("Appointment",{staticClass:"appointment",attrs:{time:7+e+":00",date:t.date,index:e-1}})})),1)],1)},K=[],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"appointment",on:{click:t.reserve}},[n("p",{staticClass:"time v-center"},[t._v(t._s(t.time))])])},Z=[],G=(n("ac1f"),n("1276"),n("d3b7"),n("159b"),n("caad"),n("2532"),{name:"Appointment",data:function(){return{reserved:!1}},props:{time:String,date:String,index:Number},computed:Object(g["a"])({},Object(v["c"])(["appointments"])),watch:{appointments:function(){this.update()}},methods:{reserve:function(){if(localStorage.user&&"null"!==localStorage.user){if(!this.reserved){var t,e=parseInt(this.time.split(":")[0]);t=e++<9?new Date(this.date+"T0"+e+":00:00"):new Date(this.date+"T"+e+":00:00");var n=JSON.parse(localStorage.user);this.$socket.emit("change",{token:n.token,userID:n.id,date:t})}}else this.$router.push({name:"Login"})},update:function(){var t=this;this.reserved||this.appointments.forEach((function(e){(e.date.includes(t.date+"T"+t.time.split(":")[0])||e.date.includes(t.date+"T0"+t.time.split(":")[0]))&&(document.getElementsByClassName("appointment")[t.index].style.cursor="default",document.getElementsByClassName("appointment")[t.index].style.backgroundColor="#cb7ca2",document.getElementsByClassName("appointment")[t.index].style.boxShadow="none",t.reserved=!0)}))}},mounted:function(){this.update()}}),Q=G,V=(n("7f9d"),Object(u["a"])(Q,F,Z,!1,null,"503f4281",null)),W=V.exports,X={name:"Appointments",components:{Header:_,Appointment:W},data:function(){return{hours:0}},props:{str:String,date:String},computed:{hoursComputed:function(){return this.hours}},methods:Object(g["a"])({},Object(v["b"])(["getAppointments"])),mounted:function(){var t=this;this.getAppointments(this.date).then((function(){t.hours=13}))}},Y=X,tt=(n("60e1"),Object(u["a"])(Y,q,K,!1,null,"0e7bd4ae",null)),et=tt.exports;s["default"].use(p["a"]);var nt=[{path:"/",name:"Home",component:x},{path:"/calendar",name:"Calendar",component:L},{path:"/appointments",name:"Appointments",component:et,props:!0},{path:"/login",name:"Login",component:I},{path:"/register",name:"Register",component:I,props:{isRegister:!0}}],st=new p["a"]({mode:"history",base:"/",routes:nt}),at=st,rt=n("5f5b"),ot=n("b1e0");n("e9c4");s["default"].use(v["a"]);var it=new v["a"].Store({state:{user:null,appointments:[]},mutations:{setUser:function(t,e){t.user=e,localStorage.user=e?JSON.stringify(e):null},addAppointment:function(t,e){t.appointments.push(e)}},actions:{getAppointments:function(t,e){var n=t.commit;return new Promise((function(t){fetch("https://sj-projekat.herokuapp.com:8081/user/appointments/".concat(e)).then((function(e){e.json().then((function(e){e.forEach((function(t){n("addAppointment",t)})),t()}))}))}))},login:function(t,e){var n=t.commit;return new Promise((function(t,s){fetch("https://sj-projekat.herokuapp.com:8082/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})}).then((function(e){e.json().then((function(e){e.token&&(n("setUser",e),t()),s({msg:e.msg})}))}))}))},register:function(t,e){var n=t.commit;return new Promise((function(t,s){return e.username.length<3?s({msg:"Korisnicko ime mora sadrzati minimalno 3 karaktera!"}):e.password.length<3?s({msg:"Sifra mora sadrzati minimalno 3 karaktera!"}):e.password!==e.repeatedPassword?s({msg:"Sifre se ne poklapaju!"}):void fetch("https://sj-projekat.herokuapp.com:8082/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})}).then((function(e){e.json().then((function(e){return e.token?(n("setUser",e),t()):s({msg:e.msg})}))}))}))},logout:function(t){var e=t.commit;return new Promise((function(t,n){e("setUser",null),t()}))},socket_change:function(t,e){var n=t.commit;n("addAppointment",JSON.parse(e))}}}),ut=n("5132"),ct=n.n(ut);n("f9e3"),n("2dd8"),n("db43");s["default"].use(rt["a"]),s["default"].use(ot["a"]),s["default"].use(new ct.a({debug:!1,connection:"https://sj-projekat.herokuapp.com:8081",vuex:{store:it,actionPrefix:"socket_"}})),s["default"].config.productionTip=!1,new s["default"]({router:at,store:it,render:function(t){return t(l)}}).$mount("#app")},"5e07":function(t,e,n){t.exports=n.p+"img/day_button.f0877d38.svg"},"60e1":function(t,e,n){"use strict";n("e506")},"7f76":function(t,e,n){"use strict";n("8690")},"7f9d":function(t,e,n){"use strict";n("b8c5")},8690:function(t,e,n){},8839:function(t,e,n){},"95f4":function(t,e,n){"use strict";n("8839")},"99e0":function(t,e,n){t.exports=n.p+"img/register.e9ac0cd5.svg"},a8a7:function(t,e,n){"use strict";n("e362")},b8c5:function(t,e,n){},c768:function(t,e,n){t.exports=n.p+"img/profile.b96786ee.svg"},cb5b:function(t,e,n){t.exports=n.p+"img/zakazi.cae656bf.svg"},d2df:function(t,e,n){},d625:function(t,e,n){t.exports=n.p+"img/login.711a1f62.svg"},d665:function(t,e,n){"use strict";n("0649")},db43:function(t,e,n){},e347:function(t,e,n){t.exports=n.p+"img/logo.97927d80.svg"},e362:function(t,e,n){},e506:function(t,e,n){}});
//# sourceMappingURL=app.98529a81.js.map